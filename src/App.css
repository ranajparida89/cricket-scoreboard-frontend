/************************************************************
 * App.css — stable, mobile-friendly base
 * - No white screen (doesn't blur <body>)
 * - No mobile flicker/tearing (GPU promotion + no heavy filters)
 * - Leaderboard/Test tables won't “break” (nowrap + proper isolation)
 ************************************************************/

/* ===== App layout ===== */
.App {
  text-align: center;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}
main { flex: 1; }

/* ===== Global stability for mobile & PWA ===== */
html, body, #root {
  min-height: 100%;
  overflow-x: hidden;                 /* prevents 1px horizontal jitter */
  overscroll-behavior-y: contain;     /* stops edge-bounce/glow recomposition */
  -webkit-font-smoothing: antialiased;
  -webkit-overflow-scrolling: touch;  /* smooth iOS scroll */
}
* { -webkit-tap-highlight-color: transparent; }  /* removes tap flash */

/* Promote heavy surfaces to GPU layers (NOT the body) */
.card,
.bg-dark:not(body),
.crickedge-footer,
.navbar,
header {
  transform: translateZ(0);
  will-change: transform;
  backface-visibility: hidden;
  /* NOTE: we do NOT use contain: paint globally (it can clip children).
     We selectively isolate rows later, where it's safe. */
}

/* ===== App logo ===== */
.App-logo { height: 40vmin; pointer-events: none; }
@media (prefers-reduced-motion: no-preference) {
  .App-logo { animation: App-logo-spin infinite 20s linear; }
}

/* ===== Header & themes ===== */
.App-header {
  background-color: #171922;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  font-size: calc(10px + 2vmin);
  color: #fff;
}
.dark, body.dark, #root.dark {
  background: #0a0a0a !important;  /* pure black AMOLED */
  color: #fff;
  transition: background .3s, color .3s;
}
.light, body.light, #root.light {
  background: #f8f9fa !important;
  color: #212529;
  transition: background .3s, color .3s;
}

/* ===== Cards (base look) ===== */
.card,
.bg-dark:not(body) {
  background: rgba(30,33,50,.94) !important;
  border-radius: 1.2em;
  box-shadow: 0 2px 14px #0006;
}

/* ===== Links ===== */
a, .App-link {
  color: #ffe066;
  transition: color .2s;
  text-decoration: none;
}
a:hover { color: #ffb800; text-decoration: underline; }
.light a, .light .App-link { color: #0d6efd; }
.light a:hover { color: #00b3ff; }

/* Text selection */
::selection { background: #ffd40080; }

/* ===== Footer (no 100vw to avoid horizontal scroll) ===== */
.crickedge-footer {
  width: 100%;
  background: #0a0a0a;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 14px 0 2px 0;
  margin: 0 auto;
  box-shadow: 0 -2px 30px #0006;
}
.footer-logo-img {
  width: 120px;
  margin-bottom: 6px;
  filter: drop-shadow(0 0 20px #ffd70066);
  border-radius: 12px;
}
.footer-copy {
  font-size: 1em;
  color: #FFD700;
  font-weight: 500;
  letter-spacing: 1.2px;
  margin-bottom: 0;
}
.crickedge-name { font-weight: 700; color: #ffe066; }
@media (max-width: 600px) {
  .footer-logo-img { width: 85px; }
  .footer-copy { font-size: .95em; }
  .crickedge-footer { padding: 10px 0 0 0; }
}

/* ===== Glass blur (scoped, NOT on <body>) ===== */
.card,
.bg-dark:not(body) {
  backdrop-filter: blur(2.5px);
  -webkit-backdrop-filter: blur(2.5px);
  background: rgba(30,33,50,.93) !important;
}
/* On mobile, disable blur to avoid GPU flicker/tearing */
@media (max-width: 768px) {
  .card,
  .bg-dark:not(body) {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    background: rgba(30,33,50,.96) !important;
  }
}

/* ===== Animations ===== */
@keyframes App-logo-spin {
  from { transform: rotate(0deg); }
  to   { transform: rotate(360deg); }
}

/* ==========================================================
   COMPONENT-SPECIFIC STABILITY (leaderboard & match tables)
   ========================================================== */

/* Always promote these surfaces to dedicated GPU layers */
.leaderboard-glass,
.lbfx-glass,     /* alt leaderboard wrapper */
.trfx-glass,     /* TestRanking wrapper */
.mhfx-glass,     /* MatchHistory wrapper */
.nrr-track, .nrr-bar,
.win-track, .win-bar {
  transform: translateZ(0);
  will-change: transform;
  backface-visibility: hidden;
}

/* Touch devices & small screens: disable heavy effects */
@media (max-width: 900px), (pointer: coarse) {
  /* Kill backdrop blur on glass cards to stop last flickers */
  .leaderboard-glass,
  .lbfx-glass,
  .trfx-glass,
  .mhfx-glass {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    background: rgba(13,31,47,.96) !important; /* solid glassy fallback */
    box-shadow: 0 10px 26px rgba(0,0,0,.35);
  }

  /* Remove 3D hover/tilt transforms that thrash layers on touch */
  .lb-row,
  .mhfx-row,
  .trfx-row {
    transform: none !important;
    transition: background-color .18s ease !important;
    box-shadow: none !important;
  }

  /* Remove expensive filters on animated bars/icons */
  .nrr-bar,
  .win-bar,
  .trophy {
    filter: none !important;
  }

  /* Particles add translucent layers while scrolling—hide on mobile */
  #lbfx-particles,
  #trfx-particles,
  #mhfx-particles {
    display: none !important;
  }
}

/* If the page sets body.bg-dark (Bootstrap), keep it simple */
body.bg-dark { background-color: #0a0a0a !important; }

/* ==========================================================
   ROW/BLOCK “BREAKING” FIXES (no wrapping / no clipping)
   ========================================================== */

/* 1) tables use fixed layout for consistent column widths */
.leaderboard-table,
.trfx-table,
.mhfx-table {
  table-layout: fixed;
  width: 100%;
}

/* 2) keep cell content in a single line; ellipsize instead of wrapping */
.leaderboard-table thead th,
.leaderboard-table tbody td,
.trfx-table .th,
.trfx-table .td,
.mhfx-table thead th,
.mhfx-table tbody td {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* 3) isolate each row so effects don't bleed into neighbors */
.leaderboard-table tbody tr,
.mhfx-table tbody tr,
.trfx-table .tr-row,
.trfx-row {
  isolation: isolate;   /* new stacking context per row */
}

/* 4) NRR / Winner cells must be allowed to show glow without clipping */
.leaderboard-table td.nrr-cell,
.mhfx-table td.mhfx-winner {
  position: relative;
  overflow: visible;
}

/* 5) Tighter spacing on small screens for better fit */
@media (max-width: 768px) {
  .leaderboard-table thead th,
  .leaderboard-table tbody td,
  .mhfx-table thead th,
  .mhfx-table tbody td {
    padding: 10px 8px !important;
    font-size: 14px !important;
  }
}
/* =========================================================
   Samsung S23 Ultra (Chrome, high-DPR) stability overrides
   - Remove gradients/pseudo glows
   - Collapse table gaps
   - Solid row backgrounds
   - Simple shadows only
   ========================================================= */
@media (pointer: coarse) and (-webkit-min-device-pixel-ratio: 2) {
  /* 1) Glass wrappers: no gradients/pseudo backgrounds */
  .leaderboard-glass,
  .lbfx-glass,
  .trfx-glass,
  .mhfx-glass {
    background: #0f1b28 !important;         /* solid, dark navy */
    box-shadow: 0 6px 16px rgba(0,0,0,.28) !important;
    border: 1px solid rgba(255,255,255,.06) !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }
  .leaderboard-glass::before, .leaderboard-glass::after,
  .lbfx-glass::before, .lbfx-glass::after,
  .trfx-glass::before, .trfx-glass::after,
  .mhfx-glass::before, .mhfx-glass::after { content: none !important; }

  /* 2) Collapse the tables (removes the “stepped” gaps on scroll) */
  .leaderboard-table,
  .trfx-table,
  .mhfx-table {
    border-collapse: collapse !important;
    border-spacing: 0 !important;
    table-layout: fixed !important;
  }

  /* 3) Rows: solid background, no per-row shadow */
  .leaderboard-table tbody tr,
  .mhfx-table tbody tr {
    background: #0f1e2d !important;
    box-shadow: none !important;
    border-bottom: 1px solid rgba(255,255,255,.06) !important;
    position: relative; z-index: 0;
  }
  .leaderboard-table tbody td,
  .mhfx-table tbody td { position: relative; z-index: 1; }

  /* 4) Never wrap inside cells → no multi-line bumps */
  .leaderboard-table thead th,
  .leaderboard-table tbody td,
  .trfx-table .th, .trfx-table .td,
  .mhfx-table thead th, .mhfx-table tbody td {
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }

  /* 5) Bars/effects: keep them simple & non-filtered */
  .nrr-track, .win-track { background: rgba(255,255,255,.12) !important; }
  .nrr-bar, .win-bar, .trophy {
    filter: none !important;
    box-shadow: none !important;
  }
  .win-bar .win-head { box-shadow: none !important; opacity: .9; }

  /* 6) Slightly tighter spacing for mobile fit */
  .leaderboard-table thead th,
  .leaderboard-table tbody td,
  .mhfx-table thead th,
  .mhfx-table tbody td {
    padding: 10px 8px !important;
    font-size: 14px !important;
  }
}
/* highlight newly imported players inside Squad list */
.new-chip {
  background: #22c55e;
  color: #0b1220;
  font-weight: 700;
  font-size: 10px;
  padding: 2px 6px;
  border-radius: 999px;
  margin-left: 8px;
}
.new-glow {
  box-shadow: 0 0 0 2px rgba(34,197,94,0.25), 0 0 20px rgba(34,197,94,0.45);
  transition: box-shadow 0.3s ease;
}
