:root{
  --bg:#0b1119; --panel:#0f1724; --soft:rgba(255,255,255,.08); --soft2:rgba(255,255,255,.12);
  --text:#f8fbff; --muted:#cfe0ff; --gold:#f5d26b; --gold-d:#c3a64a; --teal:#58e6d9;
  --good:#79e39a; --bad:#ff6b7a;

  /* Top-3 row highlight */
  --top3-bg-1: rgba(70, 160, 110, .16);
  --top3-bg-2: rgba(40, 110, 80,  .12);
  --top3-border: rgba(121, 227, 154, .35);
  --top3-glow: rgba(121, 227, 154, .18);
}

.tp-simple{
  background:var(--panel);
  border:1px solid var(--soft);
  border-radius:16px;
  padding:16px;
  color:var(--text);
  box-shadow:0 14px 40px rgba(0,0,0,.35);
}

/* header */
.tp-head{
  display:flex; align-items:flex-end; gap:16px; justify-content:space-between; flex-wrap:wrap; margin-bottom:10px;
}
.tp-title{ display:flex; align-items:center; gap:10px; margin:0; color:var(--text); font-weight:900; }
.tp-title .medal{ filter:drop-shadow(0 3px 10px rgba(245,210,107,.4)); }

.info-btn{
  margin-left:6px; width:24px; height:24px; border-radius:50%;
  background:#121a28; border:1px solid var(--soft2); color:var(--gold);
  font-weight:800; line-height:24px; text-align:center; cursor:pointer;
  box-shadow:0 0 10px rgba(245,210,107,.15) inset;
}
.filters{ display:flex; gap:12px; align-items:flex-end; flex-wrap:wrap; margin-left:auto; }
.filters label{ display:flex; flex-direction:column; gap:6px; }
.filters label span{ color:var(--muted); font-size:12px; }

/* Base select look (dark) */
.sel.dark{
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background:#0b1119;
  color:var(--text);
  border:1px solid var(--soft2);
  padding:8px 10px;
  border-radius:10px;
  min-width:160px;
  box-shadow:0 0 0 1px rgba(245,210,107,.05), 0 10px 30px rgba(0,0,0,.25);
  color-scheme: dark;
}
.sel.dark:focus{
  outline:none;
  border-color:rgba(245,210,107,.35);
  box-shadow:0 0 10px rgba(245,210,107,.25);
}

/* darken the popup options list */
.sel.dark option,
.sel.dark optgroup{
  background-color:#0b1119;
  color:var(--text);
}
.sel.dark option:hover,
.sel.dark option:checked{
  background-color:#0f1724;
  color:var(--text);
}

/* fallback if a select misses .sel.dark */
.filters select{
  background:#0b1119;
  color:var(--text);
  border:1px solid var(--soft2);
  border-radius:10px;
  color-scheme: dark;
}
.filters select option{ background:#0b1119; color:var(--text); }
.filters select option:hover,
.filters select option:checked{ background:#0f1724; }

/* high-contrast */
@media (forced-colors: active){
  .sel.dark{ forced-color-adjust: none; }
}

.btn-gold{
  background:linear-gradient(180deg,var(--gold),var(--gold-d));
  border:0; color:#151b22; font-weight:800; padding:10px 16px; border-radius:12px;
  cursor:pointer; box-shadow:0 8px 20px rgba(245,210,107,.25);
}
.btn-gold:disabled{ opacity:.7; cursor:default; }
.btn-gold:hover{ filter:brightness(1.06); }

/* cards */
.card{
  background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.012));
  border:1px solid var(--soft); border-radius:14px; box-shadow:0 6px 20px rgba(0,0,0,.25);
}
.card-head{ padding:12px 14px; border-bottom:1px solid var(--soft); font-weight:900; color:var(--text); }

/* chart */
.tp-chart{ margin-top:6px; }
.chart-wrap{ padding:8px 10px 2px; }
.linechart{ width:100%; height:auto; display:block; }
.line{ fill:none; stroke-width:3; filter:drop-shadow(0 2px 8px rgba(0,0,0,.35)); }
.line.gold{ stroke:var(--gold); }
.line.teal{ stroke:var(--teal); }
.dot{ stroke:#1b2230; stroke-width:2; }
.dot.gold{ fill:var(--gold); }
.dot.teal{ fill:var(--teal); }
.tick{ font-size:12px; fill:var(--muted); }
.tick.right{ text-anchor:start; }
.tick.left{ text-anchor:end; }
.xlabel{ font-size:12px; fill:var(--muted); text-anchor:middle; }
.xlabel.small{ font-size:11px; }
.xlabel.rot{ text-anchor:end; }
.legend-bg{ fill:#0e1624; opacity:.92; }
.legend-txt{ fill:var(--text); font-size:12px; }
.grid{ stroke:rgba(255,255,255,.06); stroke-width:1; }
.grid.v{ opacity:.45; }
.axis-name{ fill:#cfe4ff; font-weight:800; }

/* Value labels */
.val{
  font-weight:900;
  paint-order:stroke;
  stroke:rgba(0,0,0,.65);
  stroke-width:2px;
}
.val.goldv{ fill:var(--gold); }
.val.tealv{ fill:var(--teal); }

/* table */
.tp-table-card{ margin-top:12px; }
.table-wrap{ padding:10px; }
.tp-table{ width:100%; border-collapse:separate; border-spacing:0 8px; table-layout:fixed; }

/* dark header */
.tp-table thead tr{
  background: linear-gradient(180deg, #102235, #0c1a2b) !important;
  border-bottom: 1px solid rgba(255,255,255,.08);
}
.tp-table thead th{
  color: #ffffff !important;
  font-weight: 900;
  text-shadow: 0 1px 0 rgba(0,0,0,.35);
}
.tp-table thead { background: transparent !important; }

/* rows */
.tp-table tbody td{
  padding:12px 10px; font-size:16px; color:#ffffff; text-align:center; border:0;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.tp-table tbody tr{
  background:linear-gradient(180deg, rgba(17,32,48,.65), rgba(10,23,35,.55));
  border:1px solid rgba(255,255,255,.07);
  border-radius:12px;
  box-shadow:0 12px 28px rgba(0,0,0,.35);
  transition:transform .18s ease, box-shadow .18s ease, background-color .18s ease, border-color .18s ease;
}
.tp-table tbody tr:hover{
  transform:translateY(-2px);
  box-shadow:0 18px 38px rgba(0,0,0,.42);
}

/* Rank + name */
.rank-badge{ background:#1a2230; border:1px solid var(--soft2); color:#dfe7ff; padding:0 6px; border-radius:10px; font-weight:900; font-size:13px; }
.tname{
  font-weight:1000; letter-spacing:.2px; text-align:left;
  display:flex; align-items:center; gap:8px;   /* to hold the flag nicely */
}
.goldtxt{ color:var(--gold); text-shadow:0 0 14px rgba(245,210,107,.22); }

/* Points chip */
.points-chip{ display:inline-block; min-width:36px; padding:6px 10px; border-radius:10px; font-weight:1000; text-align:center; }
.points-chip.top3{
  background:linear-gradient(180deg,var(--gold), var(--gold-d));
  color:#121620;
  box-shadow:0 0 18px rgba(245,210,107,.18), 0 0 6px rgba(245,210,107,.12);
  animation:softPulse 4s ease-in-out infinite;
}
.points-chip.dim{ background:#0e1624; color:#eaf6ff; border:1px solid rgba(245,210,107,.18); box-shadow:0 0 6px rgba(245,210,107,.12) inset; }
@keyframes softPulse{ 0%,100%{ box-shadow:0 0 12px rgba(245,210,107,.15); } 50%{ box-shadow:0 0 22px rgba(245,210,107,.28); } }

.good{ color:var(--good); font-weight:900; }
.bad{ color:var(--bad); font-weight:900; }

/* ============= NEW: skull for negative NRR (dynamic) ============= */
.tp-table td .bad::after{
  content: "  ðŸ’€";
  margin-left:6px;
  font-size:14px;
  vertical-align:-1px;
  color:#ff5a66;         /* if your platform colors emoji, this will be red */
  filter: drop-shadow(0 0 6px rgba(255,90,102,.35));
}

/* ============= NEW: Top-3 styling ============= */
/* bigger, punchier rank badge for Top-3 */
.tp-table tbody tr.lb-row.top-1 .rank-badge,
.tp-table tbody tr.lb-row.top-2 .rank-badge,
.tp-table tbody tr.lb-row.top-3 .rank-badge{
  font-size:16px;
  padding:0 8px;
  background: linear-gradient(180deg,#fbe7a2,#d9b447);
  color:#111;
  border-color: rgba(245,210,107,.95);
  box-shadow: 0 0 10px rgba(245,210,107,.25);
}

/* thin golden, crisp border around the whole Top-3 rows */
.tp-table tbody tr.lb-row.top-1,
.tp-table tbody tr.lb-row.top-2,
.tp-table tbody tr.lb-row.top-3{
  background: linear-gradient(180deg, var(--top3-bg-1), var(--top3-bg-2)) !important;
  border-color: var(--gold) !important;
  box-shadow:
    0 12px 28px rgba(0,0,0,.35),
    0 0 0 1px rgba(245,210,107,.92) inset;  /* sharp golden line */
}

/* tiny waving flag next to Top-3 team names */
.flag-emoji{
  font-size:16px;
  line-height:1;
  animation: flagWave 3.2s ease-in-out infinite;
  transform-origin: left bottom;
  filter: drop-shadow(0 1px 2px rgba(0,0,0,.35));
}
@keyframes flagWave{
  0%,100%{ transform: rotate(0deg) translateY(0); }
  50%{ transform: rotate(-7deg) translateY(-1px); }
}

/* empty states */
.empty{ padding:28px; text-align:center; color:var(--muted); }
.empty-row{ padding:20px 0 !important; text-align:center; color:var(--muted); }

/* modal */
.modal{ position:fixed; inset:0; background:rgba(0,0,0,.55); display:flex; align-items:center; justify-content:center; z-index:9999; }
.modal-box{ width:min(720px, 92vw); background:#0f1624; color:var(--text); border:1px solid rgba(245,210,107,.25); border-radius:16px; box-shadow:0 30px 80px rgba(0,0,0,.5), 0 0 24px rgba(245,210,107,.2); }
.modal-head{ display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom:1px solid var(--soft); }
.modal-body{ padding:14px 16px; }
.modal-body code{ background:#0c1421; padding:2px 6px; border-radius:6px; border:1px solid var(--soft); }
.modal-foot{ padding:12px 16px; border-top:1px solid var(--soft); display:flex; justify-content:flex-end; }
.modal-close{ background:#131c2a; border:1px solid var(--soft2); color:var(--text); border-radius:8px; width:32px; height:32px; cursor:pointer; }

/* mobile */
@media (max-width: 900px), (pointer: coarse){
  .tp-table{ border-collapse:collapse; border-spacing:0; }
  .tp-table tbody tr{ box-shadow:none; border-bottom:1px solid rgba(255,255,255,.06); transform:none; }
  .tp-table thead th, .tp-table tbody td{ padding:10px 8px; font-size:14px; }
}

/* force dark header */
.tp-table thead,
.tp-table thead tr,
.tp-table thead th,
.tp-table thead th * {
  background: #0f2336 !important;
  background-image: linear-gradient(180deg, #10253a, #0b1a2a) !important;
  color: #ffffff !important;
  border-color: rgba(255,255,255,.08) !important;
  text-shadow: 0 1px 0 rgba(0,0,0,.35);
}

/* ===== Inline editing (admin-only UX) ===== */
.editable { cursor: cell; position: relative; }
.editable:hover::after {
  content: "â†º dbl-click to edit";
  position: absolute;
  right: 8px; top: 6px;
  font-size: 11px;
  color: rgba(255,255,255,.45);
  pointer-events: none;
}

.edit-input {
  width: 100%;
  padding: 6px 8px;
  background: #0b1119;
  color: var(--text);
  border: 1px solid var(--soft2);
  border-radius: 8px;
  outline: none;
  box-shadow: 0 0 0 1px rgba(245,210,107,.05);
}
.edit-input:focus {
  border-color: rgba(245,210,107,.35);
  box-shadow: 0 0 0 2px rgba(245,210,107,.2);
}
/* Ensure only one skull is ever shown (JSX-controlled) */
.tp-table .bad::before,
.tp-table .bad::after,
.tp-table .nrr.bad::before,
.tp-table .nrr.bad::after {
  content: none !important;
}

.skull {
  margin-left: 6px;
  font-size: 14px;
  vertical-align: -1px;
}
